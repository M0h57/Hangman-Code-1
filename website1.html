<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>HTML5 MKV / HLS Player</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f9f9f9;
    padding: 24px;
    text-align: center;
  }
  h2 { margin-bottom: 10px; }
  input {
    width: 70%;
    padding: 8px;
    font-size: 1rem;
    margin-right: 8px;
  }
  button {
    padding: 8px 12px;
    font-size: 1rem;
    cursor: pointer;
  }
  #status {
    margin-top: 10px;
    color: #444;
  }
  video {
    display: block;
    margin: 20px auto;
    width: 100%;
    max-width: 960px;
    height: auto;
    background: #000;
    border-radius: 10px;
  }
</style>
</head>
<body>
  <h2>HTML5 MKV / MP4 / HLS Player</h2>
  <p>Paste a direct video link (e.g. .mkv, .mp4, .m3u8):</p>
  
  <div>
    <input id="url" placeholder="https://example.com/video.mkv">
    <button id="playBtn">Play</button>
  </div>
  
  <p id="status"></p>
  
  <!-- HTML5 video element for extension compatibility -->
  <video id="video" controls playsinline></video>
  
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    const playBtn = document.getElementById('playBtn');
    const video = document.getElementById('video');
    const status = document.getElementById('status');

    playBtn.addEventListener('click', () => {
      const url = document.getElementById('url').value.trim();
      if (!url) return alert('Enter a video URL first.');

      status.textContent = 'Loading video...';

      // Stop current playback
      video.pause();
      video.removeAttribute('src');
      video.load();

      if (url.endsWith('.m3u8')) {
        // HLS stream
        if (Hls.isSupported()) {
          const hls = new Hls();
          hls.loadSource(url);
          hls.attachMedia(video);
          hls.on(Hls.Events.MANIFEST_PARSED, () => {
            video.play();
            status.textContent = 'Playing HLS stream...';
          });
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
          video.src = url;
          video.play();
          status.textContent = 'Playing HLS natively...';
        } else {
          status.textContent = 'HLS not supported in this browser.';
        }
      } else {
        // Direct link (MKV, MP4, WebM, etc.)
        video.src = url;
        video.play()
          .then(() => status.textContent = 'Playing...')
          .catch(err => {
            status.textContent = 'Error: ' + err;
          });
      }
    });
  </script>
</body>
</html>
